!function(){"use strict";angular.module("Users",[]),angular.module("InstaHashApp",["ngRoute","ui.bootstrap","Users"]).config(["$locationProvider","$routeProvider",function($locationProvider,$routeProvider){$locationProvider.hashPrefix("!"),$routeProvider.when("/login",{templateUrl:"/views/users/login.html",controller:"LoginController"}).when("/home",{templateUrl:"/views/users/home.html",controller:"HomeController"}).when("/historico",{templateUrl:"/views/users/historico.html",controller:"HistoricoController"}).otherwise({redirectTo:"/login"})}]).run(function($location,$rootScope){$rootScope.$on("$locationChangeStart",function(event,next,current){let hdd=document.getElementById("hdd_username");console.log("Hdd value: "+hdd.value),""!=hdd.value&&(localStorage.setItem("username",hdd.value),$location.path("/home"))})})}(),angular.module("InstaHashApp").constant("configs",{base_url:"http://localhost:8000",instagram:{authorize:"https://api.instagram.com/oauth/authorize/",client_id:"48b53e55487f4e71a3313b4b14185175",redirect_uri:"http://localhost:8000/callbackLogin"}}),function(){"use strict";angular.module("Users",[]).controller("LoginController",["$scope","$window","configs",function($scope,$window,configs){$scope.btnLogin=function(){var url=configs.instagram.authorize;url+="?client_id="+configs.instagram.client_id,url+="&redirect_uri="+configs.instagram.redirect_uri,url+="&response_type=code",url+="&scope=public_content",$window.location.href=url}}]).controller("HomeController",["$scope","$rootScope","UsersFactory",function($scope,$window,UsersFactory){function renderGallery(){$scope.loading=!1,document.getElementById("links").onclick=function(event){var target=(event=event||window.event).target||event.srcElement,options={index:target.src?target.parentNode:target,event:event},links=document.getElementsByTagName("a");blueimp.Gallery(links,options)}}$scope.activeTab="/home",$scope.items=[],$scope.showCarregarMais=!1,$scope.loading=!1,$scope.pesquisar=function(){$scope.loading=!0,$scope.tag=document.getElementById("txt_hashtag").value;let username=localStorage.getItem("username");""!=username&&""!=$scope.tag?UsersFactory.getHashtag(username,$scope.tag).then(function(res){console.log(res.data.data),$scope.min_tag_id=res.data.pagination.min_tag_id,$scope.items=res.data.data,res.data.data.length>=20&&($showCarregarMais=!0),renderGallery()}):$scope.loading=!1},$scope.carregarMais=function(){$scope.loading=!0;let username=localStorage.getItem("username");""!=username&&$scope.tag&&UsersFactory.getHashtag(username,$scope.tag,$scope.min_tag_id).then(function(res){res.data.data.length>0&&($scope.min_tag_id=res.data.pagination.min_tag_id,$scope.items.push(res.data.data),res.data.data.length>=20?$scope.showCarregarMais=!0:$scope.showCarregarMais=!1,renderGallery())})}}]).controller("HistoricoController",["$scope","$rootScope","UsersFactory",function($scope,$window,UsersFactory){function renderGallery(){$scope.loading=!1,document.getElementById("links").onclick=function(event){var target=(event=event||window.event).target||event.srcElement,options={index:target.src?target.parentNode:target,event:event},links=document.getElementsByTagName("a");blueimp.Gallery(links,options)}}$scope.activeTab="/historico",$scope.historico=[],$scope.loading=!1,$scope.itemSelecionado=null,function(){$scope.loading=!0;let username=localStorage.getItem("username");UsersFactory.getHistorico(username).then(function(tags){console.log(tags),$scope.historico=tags.data,$scope.loading=!1})}(),$scope.selecionarItem=function(item){$scope.itemSelecionado=item,renderGallery()}}])}(),function(){"use strict";angular.module("Users").factory("UsersFactory",["$http","configs",function($http,configs){let base=configs.base_url;return{getHashtag:function(username,hashtag,min_tag_id){let request="/tags/"+username+"/tag/"+hashtag;min_tag_id&&""!=min_tag_id&&(request+="/"+min_tag_id);let url=base+request;return $http.jsonp(url,null)},getHistorico:function(username){let url=base+("/tags/"+username+"/historico");return $http.jsonp(url)}}}])}();